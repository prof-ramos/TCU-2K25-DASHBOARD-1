
import type { Edital, Materia, Subtopic, Topic } from '../types';

const rawData = {
  "CONHECIMENTOS GERAIS": {
    "LÍNGUA PORTUGUESA": ["Compreensão e interpretação de textos de gêneros variados","Reconhecimento de tipos e gêneros textuais","Domínio da ortografia oficial","Domínio dos mecanismos de coesão textual",{"subtopics":["Emprego de elementos de referenciação, substituição e repetição, de conectores e de outros elementos de sequenciação textual","Emprego de tempos e modos verbais"]},"Domínio da estrutura morfossintática do período",{"subtopics":["Emprego das classes de palavras","Relações de coordenação entre orações e entre termos da oração","Relações de subordinação entre orações e entre termos da oração","Emprego dos sinais de pontuação","Concordância verbal e nominal","Regência verbal e nominal","Emprego do sinal indicativo de crase","Colocação dos pronomes átonos"]},"Reescrita de frases e parágrafos do texto",{"subtopics":["Significação das palavras","Substituição de palavras ou de trechos de texto","Reorganização da estrutura de orações e de períodos do texto","Reescrita de textos de diferentes gêneros e níveis de formalidade"]}],
    "LÍNGUA INGLESA": ["Compreensão de textos variados: domínio do vocabulário e da estrutura da língua, ideias principais e secundárias, explícitas e implícitas, relações intratextuais e intertextuais", "Itens gramaticais relevantes para compreensão de conteúdos semânticos", "Conhecimento e uso das formas contemporâneas da linguagem inglesa"],
    "RACIOCÍNIO ANÁLITICO": ["Raciocínio analítico e a argumentação", {"subtopics":["O uso do senso crítico na argumentação","Tipos de argumentos: argumentos falaciosos e apelativos","Comunicação eficiente de argumentos"]}],
    "CONTROLE EXTERNO": ["Conceito, tipos e formas de controle","Controle interno e externo","Controle parlamentar","Controle pelos tribunais de contas","Controle administrativo","Lei nº 8.429/1992 (Lei de Improbidade Administrativa)","Sistemas de controle jurisdicional da administração pública",{"subtopics":["Contencioso administrativo e sistema da jurisdição una"]},"Controle jurisdicional da administração pública no direito brasileiro","Controle da atividade financeira do Estado: espécies e sistemas","Tribunal de Contas da União (TCU), Tribunais de Contas dos Estados e do Distrito Federal"],
    "ADMINISTRAÇÃO PÚBLICA": ["Administração",{"subtopics":["Abordagens clássica, burocrática e sistêmica da administração","Evolução da administração pública no Brasil após 1930; reformas administrativas; a nova gestão pública"]},"Processo administrativo",{"subtopics":["Funções da administração: planejamento, organização, direção e controle","Estrutura organizacional","Cultura organizacional"]},"Gestão de pessoas",{"subtopics":["Equilíbrio organizacional","Objetivos, desafios e características da gestão de pessoas","Comportamento organizacional: relações indivíduo/organização, motivação, liderança, desempenho"]},"Noções de gestão de processos: técnicas de mapeamento, análise e melhoria de processos","Gestão de projetos",{"subtopics":["Elaboração, análise e avaliação de projetos","Principais características dos modelos de gestão de projetos","Projetos e suas etapas","Metodologia ágil"]},"Administração de recursos materiais","ESG"],
    "DIREITO CONSTITUCIONAL": ["Constituição",{"subtopics":["Conceito, objeto, elementos e classificações","Supremacia da Constituição","Aplicabilidade das normas constitucionais","Interpretação das normas constitucionais","Mutação constitucional"]},"Poder constituinte",{"subtopics":["Características","Poder constituinte originário","Poder constituinte derivado"]},"Princípios fundamentais","Direitos e garantias fundamentais",{"subtopics":["Direitos e deveres individuais e coletivos","Habeas corpus, mandado de segurança, mandado de injunção e habeas data","Direitos sociais","Direitos políticos","Partidos políticos","O ente estatal titular de direitos fundamentais"]},"Organização do Estado",{"subtopics":["Organização político-administrativa","Estado federal brasileiro","A União","Estados federados","Municípios","O Distrito Federal","Territórios","Intervenção federal","Intervenção dos estados nos municípios"]},"Administração pública",{"subtopics":["Disposições gerais","Servidores públicos"]},"Organização dos poderes no Estado",{"subtopics":["Mecanismos de freios e contrapesos","Poder Legislativo","Poder Executivo","Poder Judiciário"]},"Funções essenciais à justiça",{"subtopics":["Ministério Público","Advocacia Pública","Advocacia e Defensoria Pública"]},"Controle de constitucionalidade",{"subtopics":["Sistemas gerais e sistema brasileiro","Controle incidental ou concreto","Controle abstrato de constitucionalidade","Exame *in abstractu* da constitucionalidade de proposições legislativas","Ação declaratória de constitucionalidade","Ação direta de inconstitucionalidade","Arguição de descumprimento de preceito fundamental","Ação direta de inconstitucionalidade por omissão","Ação direta de inconstitucionalidade interventiva"]},"Defesa do Estado e das instituições democráticas",{"subtopics":["Estado de defesa e estado de sítio","Forças armadas","Segurança pública"]},"Sistema Tributário Nacional",{"subtopics":["Princípios gerais","Limitações do poder de tributar","Impostos da União, dos estados e dos municípios","Repartição das receitas tributárias"]},"Finanças públicas",{"subtopics":["Normas gerais","Orçamentos"]},"Ordem econômica e financeira",{"subtopics":["Princípios gerais da atividade econômica","Política urbana, agrícola e fundiária e reforma agrária"]},"Sistema Financeiro Nacional","Ordem social","Emenda Constitucional nº 103/2019 (Reforma da Previdência)","Direitos e interesses das populações indígenas","Direitos das Comunidades Remanescentes de Quilombos"],
    "DIREITO ADMINISTRATIVO": ["Estado, governo e administração pública",{"subtopics":["Conceitos","Elementos"]},"Direito administrativo",{"subtopics":["Conceito","Objeto","Fontes"]},"Ato administrativo",{"subtopics":["Conceito, requisitos, atributos, classification e espécies","Extinção do ato administrativo: cassação, anulação, revogação e convalidação","Decadência administrativa"]},"Agentes públicos",{"subtopics":["Legislação pertinente",{"subtopics":["Lei nº 8.112/1990","Disposições constitucionais aplicáveis"]},"Disposições doutrinárias",{"subtopics":["Conceito","Espécies","Cargo, emprego e função pública","Provimento","Vacância","Efetividade, estabilidade e vitaliciedade","Remuneração","Direitos e deveres","Responsabilidade","Processo administrativo disciplinar"]}]},"Poderes da administração pública",{"subtopics":["Hierárquico, disciplinar, regulamentar e de polícia","Uso e abuso do poder"]},"Regime jurídico-administrativo",{"subtopics":["Conceito","Princípios expressos e implícitos da administração pública"]},"Responsabilidade civil do Estado",{"subtopics":["Evolução histórica","Responsabilidade civil do Estado no direito brasileiro",{"subtopics":["Responsabilidade por ato comissivo do Estado","Responsabilidade por omissão do Estado"]},"Requisitos para a demonstração da responsabilidade do Estado","Causas excludentes e atenuantes da responsabilidade do Estado","Reparação do dano","Direito de regresso"]},"Serviços públicos",{"subtopics":["Conceito","Elementos constitutivos","Formas de prestação e meios de execução","Delegação: concessão, permissão e autorização","Classificação","Princípios"]},"Organização administrativa",{"subtopics":["Centralização, descentralização, concentração e desconcentração","Administração direta e indireta","Autarquias, fundações, empresas públicas e sociedades de economia mista","Entidades paraestatais e terceiro setor: serviços sociais autônomos, entidades de apoio, organizações sociais, organizações da sociedade civil de interesse público"]},"Controle da administração pública",{"subtopics":["Controle exercido pela administração pública","Controle judicial","Controle legislativo","Improbidade administrativa: Lei nº 8.429/1992"]},"Processo administrativo",{"subtopics":["Lei nº 9.784/1999"]},"Licitações e contratos administrativos",{"subtopics":["Legislação pertinente",{"subtopics":["Lei nº 14.133/2021","Decreto nº 11.462/2023"]},"Fundamentos constitucionais"]}],
    "AUDITORIA GOVERNAMENTAL": ["Conceito, finalidade, objetivo, abrangência e atuação",{"subtopics":["Auditoria interna e externa: papéis"]},"Instrumentos de fiscalização: auditoria, levantamento, monitoramento, acompanhamento e inspeção","Tipos de auditoria",{"subtopics":["Auditoria de conformidade","Auditoria operacional","Auditoria financeira"]},"Normas de auditoria",{"subtopics":["Normas de Auditoria do TCU","Normas da INTOSAI (Organização Internacional das Instituições Superiores de Controle): código de ética e princípios fundamentais de auditoria do setor público (ISSAIs 100, 200, 300 e 400)","Normas Brasileiras de Auditoria do Setor Público (NBASP)"]},"Planejamento de auditoria",{"subtopics":["Determinação de escopo","Materialidade, risco e relevância","Importância da amostragem estatística em auditoria","Matriz de planejamento"]},"Execução da auditoria",{"subtopics":["Programas de auditoria","Papéis de trabalho","Testes de auditoria","Técnicas e procedimentos: exame documental, inspeção física, conferência de cálculos, observação, entrevista, circularização, conciliações, análise de contas contábeis, revisão analítica, caracterização de achados de auditoria"]},"Evidências",{"subtopics":["Caracterização de achados de auditoria","Matriz de Achados e Matriz de Responsabilização"]},"Comunicação dos resultados: relatórios de auditoria"]
  },
  "CONHECIMENTOS ESPECÍFICOS": {
    "INFRAESTRUTURA DE TI": ["Arquitetura e Infraestrutura de TI",{"subtopics":["Topologias físicas e lógicas de redes corporativas","Arquiteturas de data center (on-premises, cloud, híbrida)","Infraestrutura hiperconvergente","Arquitetura escalável, tolerante a falhas e redundante"]},"Redes e Comunicação de Dados",{"subtopics":["Protocolos de comunicação de dados: TCP, UDP, SCTP, ARP, TLS, SSL, OSPF, BGP, DNS, DHCP, ICMP, FTP, SFTP, SSH, HTTP, HTTPS, SMTP, IMAP, POP3","VLANs, STP, QoS, roteamento e switching em ambientes corporativos","SDN (Software Defined Networking) e redes programáveis","Wireless corporativo: Wi-Fi 6, WPA3, roaming, mesh"]},"Sistemas Operacionais e Servidores",{"subtopics":["Administração avançada de Linux e Windows Server","Virtualização (KVM, VMware vSphere/ESXi)","Serviços de diretório (Active Directory, LDAP)","Gerenciamento de usuários, permissões e GPOS"]},"Armazenamento e Backup",{"subtopics":["SAN, NAS, DAS: arquiteturas e protocolos (iSCSI, NFS, SMB)","RAID (níveis, vantagens, hot-spare)","Backup e recuperação: RPO, RTO, snapshots, deduplicação","Oracle RMAN"]},"Segurança de Infraestrutura",{"subtopics":["Hardening de servidores e dispositivos de rede","Firewalls (NGFW), IDS/IPS, proxies, NAC","VPNs, SSL/TLS, PKI, criptografia de dados","Segmentação de rede e zonas de segurança"]},"Monitoramento, Gestão e Automação",{"subtopics":["Ferramentas: Zabbix, New Relic e Grafana","Gerência de capacidade, disponibilidade e desempenho","ITIL v4: incidentes, problemas, mudanças e configurações (CMDB)","Scripts e automação com PowerShell, Bash e Puppet"]},"Alta Disponibilidade e Recuperação de Desastres",{"subtopics":["Clusters de alta disponibilidade e balanceamento de carga","Failover, heartbeat, fencing","Planos de continuidade de negócios e testes de DR"]}],
    "ENGENHARIA DE DADOS": ["Bancos de Dados",{"subtopics":["Relacionais: Oracle e Microsoft SQL Server","Não relacionais (NoSQL): Elasticsearch e MongoDB","Modelagens de dados: relacional, multidimensional e NoSQL","SQL (Procedural Language / Structured Query Language)"]},"Arquitetura de Inteligência de Negócio",{"subtopics":["Data Warehouse","Data Mart","Data Lake","Data Mesh"]},"Conectores e Integração com Fontes de Dados",{"subtopics":["APIs REST/SOAP e Web Services","Arquivos planos (CSV, JSON, XML, Parquet)","Mensageria e eventos","Controle de integridade de dados","Segurança na captação de dados (TLS, autenticação, mascaramento)","Estratégias de buffer e ordenação"]},"Fluxo de Manipulação de Dados",{"subtopics":["ETL","Pipeline de dados: versionamento, logging e auditoria, tolerância a falhas, retries e checkpoints","Integração com CI/CD"]},"Governança e Qualidade de Dados",{"subtopics":["Linhagem e catalogação","Qualidade de dados: validação, conformidade e deduplicação","Metadados, glossários de dados e políticas de acesso"]},"Integração com Nuvem",{"subtopics":["Serviços gerenciados (Azure Data Factory, Azure Service Fabric, Azure Databricks)","Armazenamento (S3, Azure Blob, GCS)","Integração com serviços de IA e análise"]}],
    "ENGENHARIA DE SOFTWARE": ["Arquitetura de Software",{"subtopics":["Padrões arquiteturais","Monolito","Microserviços","Serverless","Arquitetura orientada a eventos e mensageria","Padrões de integração (API Gateway, Service Mesh, CQRS)"]},"Design e Programação",{"subtopics":["Padrões de projeto (GoF e GRASP)","Concorrência, paralelismo, multithreading e programação assíncrona"]},"APIs e Integrações",{"subtopics":["Design e versionamento de APIs RESTful","Boas práticas de autenticação e autorização (OAuth2, JWT, OpenID Connect)"]},"Persistência de Dados",{"subtopics":["Modelagem relacional e normalização","Bancos NoSQL (MongoDB e Elasticsearch)","Versionamento e migração de esquemas"]},"DevOps e Integração Contínua",{"subtopics":["Pipelines de CI/CD (GitHub Actions)","Build, testes e deploy automatizados","Docker e orquestração com Kubernetes","Monitoramento e observabilidade: Grafana e New Relic"]},"Testes e Qualidade de Código",{"subtopics":["Testes automatizados: unitários, de integração e de contrato (API)","Análise estática de código e cobertura (SonarQube)"]},"Linguagens de Programação",{"subtopics":["Java"]},"Desenvolvimento Seguro",{"subtopics":["DevSecOps"]}],
    "SEGURANÇA DA INFORMAÇÃO": ["Gestão de Identidades e Acesso",{"subtopics":["Autenticação e autorização","Single Sign-On (SSO)","Security Assertion Markup Language (SAML)","OAuth2 e OpenID Connect"]},"Privacidade e segurança por padrão","Malware",{"subtopics":["Vírus","Keylogger","Trojan","Spyware","Backdoor","Worms","Rootkit","Adware","Fileless","Ransomware"]},"Controles e testes de segurança para aplicações Web e Web Services","Múltiplos Fatores de Autenticação (MFA)","Soluções para Segurança da Informação",{"subtopics":["Firewall","Intrusion Detection System (IDS)","Intrusion Prevention System (IPS)","Security Information and Event Management (SIEM)","Proxy","Identity Access Management (IAM)","Privileged Access Management (PAM)","Antivírus","Antispam"]},"Frameworks de segurança da informação e segurança cibernética",{"subtopics":["MITRE ATT&CK","CIS Controls","NIST CyberSecurity Framework (NIST CSF)"]},"Tratamento de incidentes cibernéticos","Assinatura e certificação digital, criptografia e proteção de dados em trânsito e em repouso","Segurança em nuvens e de contêineres","Ataques a redes de computadores",{"subtopics":["DoS","DDoS","Botnets","Phishing","Zero-day exploits","Ping da morte","UDP Flood","MAC flooding","IP spoofing","ARP spoofing","Buffer overflow","SQL injection","Cross-Site Scripting (XSS)","DNS Poisoning"]}],
    "COMPUTAÇÃO EM NUVEM": ["Fundamentos de Computação em Nuvem",{"subtopics":["Modelos de serviço: IaaS, PaaS, SaaS","Modelos de implantação: nuvem pública, privada e híbrida","Arquitetura orientada a serviços (SOA) e microsserviços","Elasticidade, escalabilidade e alta disponibilidade"]},"Plataformas e Serviços de Nuvem",{"subtopics":["AWS","Microsoft Azure","Google Cloud Platform"]},"Arquitetura de Soluções em Nuvem",{"subtopics":["Design de sistemas distribuídos resilientes","Arquiteturas serverless e event-driven","Balanceamento de carga e autoescalonamento","Containers e orquestração (Docker, Kubernetes)"]},"Redes e Segurança em Nuvem",{"subtopics":["VPNs, sub-redes, gateways e grupos de segurança","Gestão de identidade e acesso (IAM, RBAC, MFA)","Criptografia em trânsito e em repouso (TLS, KMS)","Zero Trust Architecture em ambientes de nuvem","VPNs site-to-site, Direct Connect, ExpressRoute"]},"DevOps, CI/CD e Infraestrutura como Código (IaC)",{"subtopics":["Ferramentas: Terraform","Pipelines de integração e entrega contínua (Jenkins, GitHub Actions)","Observabilidade: monitoramento, logging e tracing (CloudWatch, Azure Monitor, GCloud Monitoring)"]},"Governança, Compliance e Custos",{"subtopics":["Gerenciamento de custos e otimização de recursos","Políticas de uso e governança em nuvem (tagueamento, cotas, limites)","Conformidade com normas e padrões (ISO/IEC 27001, NIST 800-53, LGPD)","FinOps"]},"Armazenamento e Processamento de Dados",{"subtopics":["Tipos de armazenamento: objetos, blocos e arquivos","Data Lakes e processamento distribuído","Integração com Big Data e IA"]},"Migração e Modernização de Aplicações",{"subtopics":["Estratégias de migração","Ferramentas de migração (AWS Migration Hub, Azure Migrate, GCloud Migration Center)"]},"Multicloud",{"subtopics":["Arquiteturas multicloud e híbridas","Nuvem soberana e soberania de dados"]},"Normas sobre computação em nuvem no governo federal"],
    "INTELIGÊNCIA ARTIFICIAL": ["Aprendizado de Máquina",{"subtopics":["Supervisionado","Não supervisionado","Semi-supervisionado","Aprendizado por reforço","Análise preditiva"]},"Redes Neurais e Deep Learning",{"subtopics":["Arquiteturas de redes neurais","Frameworks","Técnicas de treinamento","Aplicações"]},"Processamento de Linguagem Natural",{"subtopics":["Modelos","Pré-processamento","Agentes inteligentes","Sistemas multiagentes"]},"Inteligência Artificial Generativa","Arquitetura e Engenharia de Sistemas de IA",{"subtopics":["MLOps","Deploy de modelos","Integração com computação em nuvem"]},"Ética, Transparência e Responsabilidade em IA",{"subtopics":["Explicabilidade e interpretabilidade de modelos","Viés algorítmico e discriminação","LGPD e impactos regulatórios da IA","Princípios éticos para uso de IA"]}],
    "CONTRATAÇÕES DE TI": ["Etapas da Contratação de Soluções de TI",{"subtopics":["Estudo Técnico Preliminar (ETP)","Termo de Referência (TR) e Projeto Básico","Análise de riscos","Pesquisa de preços e matriz de alocação de responsabilidades (RACI)"]},"Tipos de Soluções e Modelos de Serviço",{"subtopics":["Contratação de software sob demanda","Licenciamento","SaaS, IaaS e PaaS","Fábrica de software e sustentação de sistemas","Serviços de infraestrutura em nuvem e data center","Serviços gerenciados de TI e outsourcing"]},"Governança, Fiscalização e Gestão de Contratos",{"subtopics":["Papéis e responsabilidades: gestor, fiscal técnico, fiscal administrativo","Indicadores de nível de serviço (SLAs) e penalidades","Gestão de mudanças contratuais e reequilíbrio econômico-financeiro"]},"Riscos e Controles em Contratações",{"subtopics":["Identificação, análise e resposta a riscos em contratos de TI","Controles internos aplicáveis às contratações públicas","Auditoria e responsabilização (jurídica e administrativa)"]},"Aspectos Técnicos e Estratégicos",{"subtopics":["Integração com o PDTIC e alinhamento com a estratégia institucional","Mapeamento e definição de requisitos técnicos e não funcionais","Sustentabilidade, acessibilidade e segurança da informação nos contratos"]},"Legislação e Normativos Aplicáveis",{"subtopics":["Lei nº 14.133/2021","Decreto nº 10.540/2020","Lei nº 13.709/2018 – LGPD (impactos em contratos de TI)","Instruções Normativas da Administração Pública",{"subtopics":["IN SGD/ME n° 01/2019 – Planejamento das contratações de soluções de TI","IN SGD/ME n° 94/2022 – Governança, Gestão e Fiscalização de Contratos de TI","IN SGD/ME n° 65/2021 – Gestão de riscos em contratações de TI"]}]}],
    "GESTÃO DE TECNOLOGIA DA INFORMAÇÃO": ["Gerenciamento de Serviços (ITIL v4)",{"subtopics":["Conceitos básicos","Estrutura","Objetivos"]},"Governança de TI (COBIT 5)",{"subtopics":["Conceitos básicos","Estrutura","Objetivos"]},"Metodologias Ágeis",{"subtopics":["Scrum","XP (Extreme Programming)","Kanban","TDD (Test Driven Development)","BDD (Behavior Driven Development)","DDD (Domain Driven Design)"]}]
  }
};

function parseSubtopics(items: any[], parentId: string): Subtopic[] {
    const subtopics: Subtopic[] = [];
    let currentSubtopic: Subtopic | null = null;
    let subtopicCounter = 1;

    items.forEach((item) => {
        if (typeof item === 'string') {
            currentSubtopic = {
                id: `${parentId}.${subtopicCounter++}`,
                title: item,
            };
            subtopics.push(currentSubtopic);
        } else if (item.subtopics && currentSubtopic) {
            currentSubtopic.subtopics = parseSubtopics(item.subtopics, currentSubtopic.id);
        } else if (item.subtopics && !currentSubtopic) {
            // This case handles when subtopics appear without a preceding title string at this level
            // This shouldn't happen with the current data structure, but as a safeguard...
            // We can treat each item in subtopics as a root subtopic here.
            const nestedSubtopics = parseSubtopics(item.subtopics, `${parentId}.${subtopicCounter++}-group`);
            subtopics.push(...nestedSubtopics);
        }
    });
    return subtopics;
}


function parseTopics(items: any[], parentId: string): Topic[] {
    const topics: Topic[] = [];
    let currentTopic: Topic | null = null;

    items.forEach((item, index) => {
        const id = `${parentId}-${index + 1}`;
        if (typeof item === 'string') {
            currentTopic = { id, title: item, subtopics: [] };
            topics.push(currentTopic);
        } else if (item.subtopics && currentTopic) {
            currentTopic.subtopics = parseSubtopics(item.subtopics, currentTopic.id);
        } else if (item.subtopics && !currentTopic) {
            // This case should ideally not happen if structure is correct
            // Handle orphan subtopics by creating a placeholder topic
            const placeholderTopic: Topic = { id: `${id}-placeholder`, title: "Tópicos Adicionais", subtopics: [] };
            placeholderTopic.subtopics = parseSubtopics(item.subtopics, placeholderTopic.id);
            topics.push(placeholderTopic);
        }
    });
    return topics;
}


const editalData: Edital = {
    examDate: "2026-02-22T00:00:00",
    materias: Object.entries(rawData).flatMap(([type, materias]) => {
        return Object.entries(materias).map(([name, topicsRaw], index) => {
            const materiaId = `${type.slice(0, 3).toUpperCase()}-${index}`;
            return {
                id: materiaId,
                name,
                slug: name.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, ''),
                type: type as 'CONHECIMENTOS GERAIS' | 'CONHECIMENTOS ESPECÍFICOS',
                topics: parseTopics(topicsRaw as any[], materiaId),
            };
        });
    }),
};


export const getEdital = (): Edital => editalData;

export const getMateriaBySlug = (slug: string): Materia | undefined => {
    return editalData.materias.find(m => m.slug === slug);
};
